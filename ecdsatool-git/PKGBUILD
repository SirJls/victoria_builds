pkgname=ecdatool-git
pkgver=1.0.22.7a196ce
pkgrel=1
pkgdesc="Creates and manipulates ECC NISTP256 keypairs"
url="https://github.com/kaniini/ecdsatool"
arch=('i686' 'x86_64')
license=('CUSTOM')
depends=('irssi-script-sasl')
makedepends=('git')
_gitname="ecdatool"
source=("$_gitname::git+https://github.com/kaniini/ecdsatool.git")
md5sums=('SKIP')

pkgver() {
  cd "$srcdir/${_gitname}"
  echo 1.0.$(git rev-list bf1438ac8..@ --count).$(git rev-parse --short HEAD)
}

prepare(){
  cd "${_gitname}"
  ./autogen.sh
}

build(){
  cd "${_gitname}"
  ./configure \
    --prefix=/usr
  make
}

package() {
  cd "${_gitname}"
  make PREFIX=/usr MANDIR=/usr/share/man DESTDIR="$pkgdir" install
  mkdir -p "$pkgdir"/usr/share/licenses/"${_gitname}"
  chmod 0755  "$pkgdir"/usr/share/licenses/"${_gitname}"/
  install -m 644 COPYING "$pkgdir"/usr/share/licenses/"${_gitname}"/LICENSE
}

# vim:set ts=2 sw=2 et:
